<!DOCTYPE html>
<html lang="en">

<head>
    <base href="/">
    <title>include - Tanka Docs Generator - WIP</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <!-- Noto Color Emoji font for cross-platform emoji support -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Color+Emoji&display=swap" rel="stylesheet">
    
    <!-- Highlight.js -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">

    <style>
        :root {
            --bs-body-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif;
            --bs-link-color-rgb: 8, 87, 168;
            --bs-link-hover-color-rgb: 6, 68, 130;
        }

        body {
            font-family: var(--bs-body-font-family);
        }

        .sidebar {
            position: sticky;
            top: 56px; /* Height of navbar */
            height: calc(100vh - 56px);
            overflow-y: auto;
            background-color: #f8f9fa;
            border-right: 1px solid #dee2e6;
            padding-top: 1rem;
        }

        .toc-sidebar {
            position: sticky;
            top: 56px; /* Height of navbar */
            height: calc(100vh - 56px);
            overflow-y: auto;
            padding-top: 1rem;
        }

        /* Offcanvas customization */
        .offcanvas-md {
            --bs-offcanvas-transition: transform .15s ease-in-out; /* Faster animation */
        }
        
        /* Remove extra whitespace above content on mobile */
        @media (max-width: 767.98px) {
            main.content {
                padding-top: 1rem;
            }
            
            /* Hide mobile control buttons when offcanvas is shown */
            .offcanvas-md.show ~ .content .d-lg-none {
                display: none !important;
            }
        }

        .toc-toggle {
            display: none;
        }

        @media (max-width: 991.98px) {
            .toc-toggle {
                display: inline-block;
            }
        }

        .sidebar .nav-link {
            font-size: 0.9rem;
            color: #495057;
        }

        .sidebar .nav-link.active, .sidebar .nav-link:hover {
            color: rgb(var(--bs-link-color-rgb));
            font-weight: 500;
        }

        /* Ensure emojis render properly in navigation */
        .sidebar .nav-link {
            font-feature-settings: "liga" on, "clig" on;
            text-rendering: optimizeLegibility;
        }

        /* Ensure emojis have proper font fallback */
        .sidebar .nav-link {
            font-family: var(--bs-body-font-family);
        }
        
        .toc-sidebar .nav-link {
            font-size: 0.8rem;
            color: #6c757d;
            padding-top: 0.25rem;
            padding-bottom: 0.25rem;
        }

        .toc-sidebar .nav-link:hover {
            color: #212529;
        }

        .toc-sidebar .nav-link.active {
            font-weight: 600;
            color: #212529; /* Darker text for readability */
            border-left: 2px solid rgb(var(--bs-link-color-rgb));
        }

        blockquote {
            font-size: 1rem;
            border-left: 4px solid #adb5bd;
            padding-left: 1rem;
            color: #6c757d;
        }

        .content h1, .content h2, .content h3, .content h4, .content h5, .content h6 {
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }

        .content h2, .content h3 {
            scroll-margin-top: 80px;
        }

        /* Adjust code block styling to match highlight.js theme */
        pre code.hljs {
            border-radius: 0.3rem;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Tanka Docs Generator - WIP</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" href="HEAD/index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="HEAD/01-getting-started/getting-started.html">Getting Started</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="HEAD/02-project-structure/index.html">Project Structure</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="HEAD/03-writing-content/index.html">Writing Content</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="HEAD/04-advanced/index.html">Advanced Features</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="HEAD/05-customization/index.html">UI Customization</a>
                        </li>
                </ul>
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="https://github.com/pekkah/tanka-docs-gen" target="_blank" rel="noopener">GitHub</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            HEAD
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
                                <li><a class="dropdown-item" href="/HEAD">HEAD</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container-fluid">
        <div class="row">
            <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block sidebar offcanvas-md offcanvas-start" tabindex="-1">
                <div class="offcanvas-header d-md-none">
                    <h5 class="offcanvas-title">Navigation</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#sidebar" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
    <nav class="nav flex-column">
<li class="nav-item">
    <div class="d-flex justify-content-between align-items-center">
        <a class="nav-link" href=HEAD/03-writing-content/markdown.html>Markdown Syntax</a>
    </div>
</li>    </nav>
    <nav class="nav flex-column">
<li class="nav-item">
    <div class="d-flex justify-content-between align-items-center">
        <a class="nav-link" href=HEAD/03-writing-content/include.html>Include Directives</a>
    </div>
</li>    </nav>
    <nav class="nav flex-column">
<li class="nav-item">
    <div class="d-flex justify-content-between align-items-center">
        <a class="nav-link" href=HEAD/03-writing-content/xref.html>Cross-References (xref)</a>
    </div>
</li>    </nav>
                </div>
            </nav>
            <main class="col-md-6 ms-sm-auto col-lg-7 px-md-4 py-3 content d-flex flex-column">
                <!-- Mobile navigation controls -->
                <div class="d-lg-none mb-3">
                    <button class="btn btn-outline-primary btn-sm me-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebar" aria-controls="sidebar">
                        <svg width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
                        </svg>
                        <span class="ms-1">Menu</span>
                    </button>
                </div>
                <!-- Mobile TOC toggle button -->
                <div class="d-lg-none mb-3">
                    <button class="btn btn-outline-secondary btn-sm toc-toggle mb-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#toc" aria-controls="toc">
                        <svg width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
                        </svg>
                        <span class="ms-1">On this page</span>
                    </button>
                </div>
                <h2 id="includes">Includes</h2>
<p>The <code>#include</code> syntax is a powerful preprocessor directive that allows you to embed content from other files directly into your documentation. This embedding happens before the Markdown is parsed, meaning that included Markdown content will be processed as if it were originally part of the parent document.</p>
<p>This feature is useful for reusing content, maintaining single sources of truth for code examples, or breaking down large documents into smaller, manageable parts.</p>
<h3 id="general-usage">General Usage</h3>
<p>The basic syntax for an include is:</p>
<pre><code class="language-markdown">\#include::xref://[sectionId@version:]path/to/your/file.ext
</code></pre>
<ul>
<li>The <code>xref</code> part works similarly to how cross-references for links work, allowing you to target files in the current section, different sections, or different versions of sections.</li>
<li>The content of the specified file will be inserted in place of the <code>#include</code> directive.</li>
</ul>
<p><strong>Important:</strong> For the included content to be correctly syntax-highlighted or rendered (e.g., code examples), it's often best to place the <code>#include</code> directive within a fenced code block with the appropriate language identifier.</p>
<h3 id="including-entire-files">Including Entire Files</h3>
<p>You can include any type of text-based file. If you include another Markdown file (<code>.md</code>), its content will be processed as Markdown. If you include a code file (e.g., <code>.cs</code>, <code>.js</code>, <code>.yaml</code>), the raw content of that file will be inserted.</p>
<p><strong>Example: Including a Markdown file</strong></p>
<p>If you have a reusable notice in <code>_partials/important-notice.md</code>:</p>
<pre><code class="language-markdown">&lt;!-- _partials/important-notice.md --&gt;
**Note:** This is an important notice that applies to multiple pages.
</code></pre>
<p>You can include it in another Markdown file like this:</p>
<pre><code class="language-markdown">This is some introductory text.

\#include::xref://_partials:important-notice.md

And here is some text after the included notice.
</code></pre>
<p>This will result in the content of <code>important-notice.md</code> being placed between the two paragraphs.</p>
<p><strong>Example: Including a Code File</strong></p>
<p>To include an entire C# file and have it displayed with C# syntax highlighting:</p>
<pre><code class="language-markdown">\`\`\`csharp
\#include::xref://src:DocsTool/Program.cs
\`\`\`
</code></pre>
<p>This will render the full content of <code>Program.cs</code> inside a C# code block.</p>
<h3 id="including-c-code-snippets-symbol-inclusion">Including C# Code Snippets (Symbol Inclusion)</h3>
<p>Tanka Docs offers a special integration with Roslyn (the .NET Compiler Platform) to include specific C# code elements (like namespaces, classes, methods, or properties) directly from your <code>.cs</code> files. This is particularly useful for keeping your documentation examples synchronized with your actual codebase.</p>
<p>To use this feature:</p>
<ol>
<li>The target file in the <code>xref</code> <strong>must be a C# file</strong> (ending in <code>.cs</code>).</li>
<li>You must append the <code>s</code> (symbol) query parameter to the <code>xref</code>, specifying the fully qualified name of the C# symbol you want to include.</li>
</ol>
<p><strong>Syntax:</strong></p>
<pre><code class="language-markdown">\#include::xref://path/to/your/file.cs?s=Your.Namespace.ClassName.MethodName
</code></pre>
<p>Or for a property:</p>
<pre><code class="language-markdown">\#include::xref://path/to/your/file.cs?s=Your.Namespace.ClassName.PropertyName
</code></pre>
<p>Or for an entire class:</p>
<pre><code class="language-markdown">\#include::xref://path/to/your/file.cs?s=Your.Namespace.ClassName
</code></pre>
<p><strong>Example: Including a Specific Method</strong></p>
<p>To include the <code>ConfigurePreProcessors</code> method from the <code>RoslynExtension.cs</code> file:</p>
<pre><code class="language-markdown">\`\`\`csharp
\#include::xref://src:DocsTool/Extensions/Roslyn/RoslynExtension.cs?s=Tanka.DocsTool.Extensions.Roslyn.RoslynExtension.ConfigurePreProcessors
\`\`\`
</code></pre>
<p>Tanka Docs will use Roslyn to find the <code>ConfigurePreProcessors</code> method within the specified file and insert its source code. This ensures your documentation always reflects the latest version of the code.</p>
<p><strong>What can be included using the <code>s</code> parameter?</strong></p>
<ul>
<li>Namespaces</li>
<li>Classes (including structs, interfaces, enums)</li>
<li>Methods</li>
<li>Properties</li>
<li>Fields</li>
<li>Events</li>
</ul>
<p>When including larger elements like classes or namespaces, their entire definition, including all members, will be inserted.</p>

            </main>
            <!-- Single responsive TOC -->
            <nav id="toc" class="col-md-3 col-lg-3 d-none d-lg-block toc-sidebar offcanvas-md offcanvas-end" tabindex="-1">
                <div class="offcanvas-header d-md-none">
                    <h5 class="offcanvas-title">On this page</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" data-bs-target="#toc" aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <strong class="d-block h6 my-2 pb-2 border-bottom toc-title d-none d-md-block">On this page</strong>
                    <nav class="nav flex-column"></nav>
                </div>
            </nav>
        </div>
    </div>
    
    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <!-- Highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>

    <script>
        (function() {

            // Left sidebar active link
            const sidebar = document.querySelector('.sidebar');
            if (sidebar) {
                const baseHref = document.baseURI;
                const currentPageHref = window.location.href.split('#')[0]; // Ignore hash
                let currentPagePath = currentPageHref.substring(baseHref.length);

                if (currentPagePath.endsWith('/')) {
                    currentPagePath = currentPagePath.slice(0, -1);
                }

                const navLinks = sidebar.querySelectorAll('a.nav-link');
                navLinks.forEach(link => {
                    const linkHref = link.getAttribute('href');
                    if (linkHref && (linkHref === currentPagePath || linkHref === currentPagePath + '/index.html')) {
                        link.classList.add('active');

                        let parentCollapse = link.closest('.collapse');
                        while(parentCollapse) {
                            parentCollapse.classList.add('show');
                            const trigger = document.querySelector(`a[data-bs-toggle="collapse"][href="#${parentCollapse.id}"]`);
                            if (trigger) {
                                trigger.setAttribute('aria-expanded', 'true');
                                trigger.classList.remove('collapsed');
                            }
                            parentCollapse = parentCollapse.parentElement.closest('.collapse');
                        }
                    }
                });
            }

            // "On this page" TOC script - single responsive TOC
            const toc = document.getElementById('toc');
            const tocToggle = document.getElementById('toc-toggle');
            
            // Constants
            const SCROLL_OFFSET = 100;
            const SCROLL_THROTTLE_MS = 25; // Optimized from 10ms
            const SCROLL_NAVIGATION_TIMEOUT_MS = 200;
            const MOBILE_BREAKPOINT = 992;
            
            if (toc) {
                const mainContent = document.querySelector('.content');
                if (!mainContent) return;
                
                const headings = mainContent.querySelectorAll('h2, h3');
                const tocNav = toc.querySelector('.offcanvas-body .nav');
                
                if (!tocNav) return;
                
                if (headings.length > 0) {
                    let isScrolling = false;
                    
                    // Create TOC links
                    headings.forEach((heading, index) => {
                        const id = 'heading-' + index;
                        if (!heading.getAttribute('id')) {
                            heading.setAttribute('id', id);
                        }

                        const link = document.createElement('a');
                        link.classList.add('nav-link');
                        if (heading.tagName === 'H3') {
                            link.classList.add('ms-3'); // Indent H3
                        }
                        
                        const href = '#' + id;
                        link.setAttribute('href', href);
                        link.textContent = heading.textContent;

                        link.addEventListener('click', (e) => {
                            e.preventDefault();
                            
                            // Temporarily disable scroll tracking during navigation
                            isScrolling = true;
                            
                            // Remove active class from all TOC links
                            tocNav.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                            
                            // Add active class to clicked link
                            link.classList.add('active');
                            
                            // On mobile, collapse the TOC after clicking a link
                            if (window.innerWidth < MOBILE_BREAKPOINT && toc) {
                                toc.classList.add('collapsed');
                                if (tocToggle) {
                                    updateToggleButton(true);
                                }
                            }
                            
                            // Navigate to the hash
                            window.location.hash = href;
                            
                            // Re-enable scroll tracking after navigation completes
                            let scrollTimeout;
                            const handleScroll = () => {
                                clearTimeout(scrollTimeout);
                                scrollTimeout = setTimeout(() => {
                                    window.removeEventListener('scroll', handleScroll);
                                    isScrolling = false;
                                }, SCROLL_NAVIGATION_TIMEOUT_MS);
                            };
                            
                            window.addEventListener('scroll', handleScroll);
                            
                            // Fallback: re-enable after 1 second
                            setTimeout(() => {
                                window.removeEventListener('scroll', handleScroll);
                                isScrolling = false;
                            }, 1000);
                        });
                        
                        tocNav.appendChild(link);
                    });

                    // Update toggle button appearance
                    const updateToggleButton = (isCollapsed) => {
                        if (!tocToggle) return;
                        
                        if (isCollapsed) {
                            tocToggle.innerHTML = `<svg width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
                            </svg><span class="ms-1">On this page</span>`;
                        } else {
                            tocToggle.innerHTML = `<svg width="16" height="16" fill="currentColor" class="bi bi-chevron-up" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/>
                            </svg><span class="ms-1">Hide</span>`;
                        }
                    };

                    // Set initial active state based on current scroll position or hash
                    const setInitialActiveState = () => {
                        const hash = window.location.hash;
                        if (hash && tocNav) {
                            const targetLink = tocNav.querySelector(`a[href="${hash}"]`);
                            if (targetLink) {
                                tocNav.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                                targetLink.classList.add('active');
                                return;
                            }
                        }
                        
                        // Find the currently visible heading
                        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                        let activeHeading = null;
                        
                        for (let i = 0; i < headings.length; i++) {
                            const heading = headings[i];
                            const rect = heading.getBoundingClientRect();
                            const headingTop = rect.top + scrollTop;
                            
                            if (headingTop <= scrollTop + SCROLL_OFFSET) {
                                activeHeading = heading;
                            } else {
                                break;
                            }
                        }
                        
                        if (activeHeading && tocNav) {
                            const activeId = activeHeading.getAttribute('id');
                            const activeLink = tocNav.querySelector(`a[href="#${activeId}"]`);
                            if (activeLink) {
                                tocNav.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                                activeLink.classList.add('active');
                            }
                        } else if (tocNav) {
                            // If no heading is visible, activate the first one
                            const firstLink = tocNav.querySelector('.nav-link');
                            if (firstLink) {
                                firstLink.classList.add('active');
                            }
                        }
                    };

                    // Set initial active state
                    setInitialActiveState();

                    // Optimized scroll tracking
                    const updateActiveOnScroll = () => {
                        if (isScrolling || !tocNav) return;
                        
                        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                        let activeHeading = null;
                        
                        for (let i = 0; i < headings.length; i++) {
                            const heading = headings[i];
                            const rect = heading.getBoundingClientRect();
                            const headingTop = rect.top + scrollTop;
                            
                            if (headingTop <= scrollTop + SCROLL_OFFSET) {
                                activeHeading = heading;
                            } else {
                                break;
                            }
                        }
                        
                        const currentActiveLink = tocNav.querySelector('.nav-link.active');
                        let newActiveLink = null;
                        
                        if (activeHeading) {
                            const activeId = activeHeading.getAttribute('id');
                            newActiveLink = tocNav.querySelector(`a[href="#${activeId}"]`);
                        } else {
                            newActiveLink = tocNav.querySelector('.nav-link');
                        }
                        
                        if (newActiveLink && newActiveLink !== currentActiveLink) {
                            tocNav.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                            newActiveLink.classList.add('active');
                        }
                    };
                    
                    // Throttled scroll listener
                    let scrollTimeout;
                    window.addEventListener('scroll', () => {
                        clearTimeout(scrollTimeout);
                        scrollTimeout = setTimeout(updateActiveOnScroll, SCROLL_THROTTLE_MS);
                    });

                    // Mobile TOC toggle functionality
                    if (tocToggle) {
                        tocToggle.addEventListener('click', () => {
                            const isCollapsed = toc.classList.contains('collapsed');
                            if (isCollapsed) {
                                toc.classList.remove('collapsed');
                                updateToggleButton(false);
                            } else {
                                toc.classList.add('collapsed');
                                updateToggleButton(true);
                            }
                        });
                    }
                } else {
                    // Hide TOC if no headings
                    toc.style.display = 'none';
                    if (tocToggle) tocToggle.style.display = 'none';
                }
            }

            // Auto-close offcanvas menus when navigation links are clicked on mobile
            // Reuse already declared sidebar and toc variables
            
            // Function to close offcanvas
            const closeOffcanvas = (element) => {
                const bsOffcanvas = bootstrap.Offcanvas.getInstance(element);
                if (bsOffcanvas) {
                    bsOffcanvas.hide();
                }
            };
            
            // Auto-close sidebar when navigation links are clicked
            if (sidebar) {
                const sidebarLinks = sidebar.querySelectorAll('a.nav-link');
                sidebarLinks.forEach(link => {
                    link.addEventListener('click', () => {
                        // Only auto-close on mobile
                        if (window.innerWidth < MOBILE_BREAKPOINT) {
                            closeOffcanvas(sidebar);
                        }
                    });
                });
            }
            
            // Auto-close TOC when TOC links are clicked
            if (toc) {
                const tocNav = toc.querySelector('.offcanvas-body .nav');
                if (tocNav) {
                    tocNav.addEventListener('click', (e) => {
                        if (e.target.tagName === 'A' && window.innerWidth < MOBILE_BREAKPOINT) {
                            closeOffcanvas(toc);
                        }
                    });
                }
            }

            if (window.location.hostname !== 'localhost') {
                return;
            }
            // Live reload script
            const port = window.location.port || (window.location.protocol === 'https:' ? '443' : '80');
            const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
            const socketUrl = `${protocol}//${window.location.hostname}:${port}/ws`;
            let socket;

            function connect() {
                socket = new WebSocket(socketUrl);
                socket.addEventListener('open', () => { console.log('Live reload connected.'); });
                socket.addEventListener('message', (event) => {
                    if (event.data === 'reload') {
                        console.log('Reloading page...');
                        window.location.reload();
                    }
                });
                socket.addEventListener('close', () => {
                    console.log('Live reload disconnected. Trying to reconnect in 2 seconds...');
                    setTimeout(connect, 2000);
                });
                socket.addEventListener('error', (err) => {
                    console.error('Live reload error:', err);
                    socket.close();
                });
            }
            connect();
        })();
    </script>
</body>
</html>